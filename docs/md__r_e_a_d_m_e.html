<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TDT Umsa: TDTUMSA</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">TDT Umsa
   </div>
   <div id="projectbrief">Una Interfaz grafica para generar paquetes Transport Stream de acuedo al decreto supremo 3152</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Buscar');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Buscar');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md__r_e_a_d_m_e.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">TDTUMSA </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><b>A GUI for FFMPEG and Opencaster to generate Transport Stream Packets acoording to D.S. 3152 of Bolivia</b></p>
<p><b>IMPORTANT</b>: You need Install Opencaster and FFmpeg compiled with libx264 and libfdk_aac.</p>
<p>Here in Uruguay we use the so-called "international" version, or ISDB-Tb (ABNT NBR 15601). However, the transmission scheme is exactly the same as in the original version, thus both references are equivalent. <br  />
</p>
<p>Since ISDB-T is similar to DVB-T, some of our blocks are heavily based on Bogdan Diaconescu's (BogdanDIA on github) DVB-T implementation (see <a href="https://github.com/BogdanDIA/gr-dvbt,">https://github.com/BogdanDIA/gr-dvbt,</a> which is now part of GNU Radio's base code). The transmitter side is based on the work of Javier and Santiago at <a href="https://github.com/jhernandezbaraibar/gr-isdbt-Tx">https://github.com/jhernandezbaraibar/gr-isdbt-Tx</a>.</p>
<p>Any help and/or feedback is welcome.</p>
<p><b>Notes and examples</b></p>
<p>The <b>receiver</b> is now complete and tested. It is capable of demodulating the complete and 1-seg ISDB-T spectrum and its operation is such that a i5 PC is capable of showing the HD signal on-line. We foresee four modes of operation:</p><ul>
<li><b>Obtaining the transmission parameters.</b> ISDB-T has several transmission parameters which may be selected by the transmitter and may (and probably will) change among channels and segments. Our current implementation is not yet capable of automatically changing its parameters, and it's up to the user to configure the receiver correctly. However, a simple example is provided (see examples/obtaining_parameters.grc) which may be used to obtain such parameters. Transmission mode and CP length should be changed until a clear peak is viewed. Then, the OFDM Synchronization block should be configured accordingly, which will result in the TMCC Decoder printing the rest of the parameters.</li>
<li><b>Vector Analyzer.</b> See examples/viewing_the_constellation.grc on how to view the received complex symbols. The receiver has been tested with all three transmission modes (2k, 4k and 8k FFT) and several CP lengths. <br  />
</li>
<li><b>Complete decoding and displaying the video/audio.</b> The receiver is capable of displaying on-line whole segments. <b>If a 1-seg transmission is present, the example in examples/rx_1seg_demo.grc may be used to decode it (it has been tested with a RTL cheap SDR)</b>. Layer B is decoded in examples/rx_demo.grc. Note that the transmission's parameters should be set accordingly by using examples/obtaining_parameters.grc. The output of both flowgraphs is a Transport Stream file which may be played by ffplay or mplayer (for instance). If before executing the flowgraph we create the file as a pipe (mkfifo test_out.ts), it should display the video online. <br  />
</li>
<li><b>Signal analyzer.</b> Our actual objective with the project is to develop a relatively inexpensive ISDB-T measurement equipment. In examples/fullseg_receiver_and_measurements.grc we present a flowgraph which measures several indicators, such as pre and post Viterbi BER, MER, channel frequency response, etc. In order to use it <b>you should install our accompanying OOT module gr-mer</b> (available at <a href="https://github.com/git-artes/gr-mer">https://github.com/git-artes/gr-mer</a>). <br  />
</li>
</ul>
<p>The <b>transmitter</b> is complete and tested. It is currently capable of the following:</p><ul>
<li>It works perfectly fine on software together with the receiver (see examples/full_transceiver.grc). A transport stream file to be used in this example is available on the project's webpage. If you are not interested in "seeing" a video image, simply feed it with random bytes.</li>
<li>Over the air transmission. We are currently able to transmit and receive the signal with SDRs (a B200 worked best for us as a transmitter) and we are successfully testing it on commercial TVs (see examples/tx_demo.grc which uses the TS files we share in our webpage). Please send us your feedback, <b>we are very interested</b>.</li>
<li>If you want to transmit your own videos (or your webcam) you may follow our step-by-step guide in <a href="https://iie.fing.edu.uy/investigacion/grupos/artes/wp-content/uploads/sites/13/2019/12/transmitting_webcam_or_videos.pdf">https://iie.fing.edu.uy/investigacion/grupos/artes/wp-content/uploads/sites/13/2019/12/transmitting_webcam_or_videos.pdf</a>.</li>
</ul>
<p>For more information (papers, recordings of ISDB-T signals, etc.) please visit our webpage: <a href="http://iie.fing.edu.uy/investigacion/grupos/artes/gr-isdbt/">http://iie.fing.edu.uy/investigacion/grupos/artes/gr-isdbt/</a>. <br  />
</p>
<p><b>Build instructions</b></p>
<p>For a system wide installation: </p><pre class="fragment">git clone https://github.com/git-artes/gr-isdbt.git  
cd gr-isdbt  
mkdir build  
cd build  
cmake ../  
make &amp;&amp; sudo make install  
</pre><p>For a user space installation, or GNU Radio installed in a location different from the default location /usr/local: </p><pre class="fragment">git clone https://github.com/git-artes/gr-isdbt.git  
cd gr-isdbt  
mkdir build  
cd build  
cmake -DCMAKE_INSTALL_PREFIX=&lt;your_GNURadio_install_dir&gt; ../
make
make install  
</pre><p>Please note that if you used PyBOMBS to install GNU Radio the DCMAKE_INSTALL_PREFIX should point to the PyBOMBS prefix.</p>
<p>On Debian/Ubuntu based distributions, you may have to run: </p><pre class="fragment">sudo ldconfig  
</pre><p><b>Remarks</b></p><ul>
<li>Instructions above assume you have downloaded and compiled GNU Radio (either with the build-gnuradio script or with PyBOMBS). If you've used a pre-compiled binary package (like in $ sudo apt-get install gnuradio), then you should also install gnuradio-dev (and naturally cmake and git, if they were not installed, plus libboost-all-dev, libcppunit-dev, liblog4cpp5-dev, swig, liborc-dev and libgsl-dev). A one-liner for all these is <code>$sudo apt-get install gnuradio-dev cmake git libboost-all-dev libcppunit-dev liblog4cpp5-dev swig liborc-dev libgsl-dev</code>.</li>
<li>The above build instructions are general. You may accelerate the compilation time by using the -j flag. Please visit <a href="http://www.math-linux.com/linux/tip-of-the-day/article/speedup-gnu-make-build-and-compilation-process">http://www.math-linux.com/linux/tip-of-the-day/article/speedup-gnu-make-build-and-compilation-process</a> for a guide. <br  />
</li>
<li><p class="startli">Note that gr-isdbt makes heavy use of VOLK. A profile should be run to make the best out of it. Please visit <a href="https://gnuradio.org/redmine/projects/gnuradio/wiki/Volk">https://gnuradio.org/redmine/projects/gnuradio/wiki/Volk</a> for instructions, or simply run: <br  />
</p>
<p class="startli">volk_profile</p>
</li>
</ul>
<p><b>FAQ</b></p>
<p><em>Q</em>: Cmake complains about unmet requirements. What's the problem? <br  />
 <em>A</em>: You should read the errors carefully (though we reckon they are sometimes mysterious). Most probably is a missing library. Candidates are Boost (in Ubuntu libboost-all-dev) or libcppunit (in Ubuntu libcppunit-dev). <br  />
</p>
<p><em>Q</em>: Cmake complains about some Policy CMP0026 and LOCATION target property and who knows what else. Again, what's the problem? <br  />
 <em>A</em>: This is a problem with using Cmake with a version &gt;= 3, which is installed in Ubuntu 16, for instance. The good news is that you may ignore all these warnings.</p>
<p><em>Q</em>: It is not compiling. What's the problem? <br  />
 <em>A</em>: Again, you should read carefully the errors. Again, it's most probably a missing library, for instance log4cpp (in Ubuntu liblog4cpp5-dev). If the problem is with the API of GNU Radio, you should update it. <br  />
</p>
<p><em>Q</em>: I got the following error: "ModuleNotFoundError: No module named 'isdbt'". What's wrong?</p>
<p><em>A</em>: You probably didn't setup the PYTHONPATH correctly. It should include at least /usr/local/lib/python3/dist-packages. For a system-wide solution, you may edit <code>/etc/environment</code> and include the following line <code>PYTHONPATH="$PYTHONPATH:/usr/local/lib/python3/dist-packages"</code>.</p>
<p><em>Q</em>: I got the following error: "AttributeError: 'module' object has no attribute 'viterbi_decoder'" (or some other block). Why? <br  />
 <em>A</em>: This problem may be generated by several factors. Did you "sudo ldconfig"? Do you have PYTHONPATH set? (It should include at least /usr/local/lib/python3/dist-packages). Another possibility is that you don't have swig installed (in this case, you must uninstall gr-isdbt, delete CMakeCache.txt in the build directory, and re-install; that is, after installing swig). <br  />
</p>
<p><em>Q</em>: Video is not playing. Why? <br  />
 <em>A</em>: In our experience, the best player is ffplay, which comes along ffmpeg. You should try it. <br  />
</p>
<p>IIE Instituto de Ingeniería Eléctrica <br  />
 Facultad de Ingeniería <br  />
 Universidad de la República <br  />
 Montevideo, Uruguay <br  />
 <a href="http://iie.fing.edu.uy/investigacion/grupos/artes/">http://iie.fing.edu.uy/investigacion/grupos/artes/</a> <br  />
</p>
<p>Please refer to the LICENSE file for contact information and further credits. <br  />
 </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generado por
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
